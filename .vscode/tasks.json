{
	"version": "2.0.0",
	"tasks": [
		{
			"type": "cargo",
			"command": "clippy",
			"problemMatcher": ["$rustc"],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"label": "rust: cargo clippy",
			"args": ["--all-targets", "--all-features", "--all"]
		},
		{
			"type": "npm",
			"script": "prep",
			"label": "pnpm: prep",
			"group": "none",
			"problemMatcher": ["$rustc"]
		},
		{
			"type": "shell",
			"label": "start",
			"command": "sh",
			"args": ["-c", "'pnpm i && pnpm prep'"],
			"problemMatcher": ["$tsc-watch", "$rustc"]
		},
		{
			"type": "shell",
			"label": "ui:dev",
			"problemMatcher": {
				"base": "$tsc-watch",
				"background": {
					"activeOnStart": true,
					"beginsPattern": "VITE v",
					"endsPattern": "http://localhost:8001/"
				}
			},
			"isBackground": true,
			"command": "pnpm",
			"args": ["desktop", "vite", "--clearScreen=false", "--mode=development"],
			"runOptions": {
				"instanceLimit": 1
			}
		},
		{
			"type": "shell",
			"label": "ui:build",
			"problemMatcher": "$tsc",
			"command": "pnpm",
			"args": ["desktop", "vite", "build"]
		},
		{
			"type": "cargo",
			"command": "run",
			"args": [
				"--manifest-path=./apps/desktop/src-tauri/Cargo.toml",
				"--no-default-features"
			],
			"env": {
				"RUST_BACKTRACE": "short"
			},
			"problemMatcher": ["$rustc"],
			"group": "build",
			"label": "rust: run spacedrive",
			"dependsOn": ["ui:dev"]
		},
		{
			"type": "cargo",
			"command": "run",
			"args": ["--manifest-path=./apps/desktop/src-tauri/Cargo.toml", "--release"],
			"env": {
				"RUST_BACKTRACE": "short"
			},
			"problemMatcher": ["$rustc"],
			"group": "build",
			"label": "rust: run spacedrive release",
			"dependsOn": ["ui:build"]
		},
		{
			"type": "cargo",
			"command": "test",
			"args": [
				"--package",
				"sd-core-sync",
				"--test",
				"lib",
				"--",
				"writes_operations_and_rows_together",
				"--exact",
				"--show-output"
			],
			"env": {
				"RUST_BACKTRACE": "short",
				"BROWSER": "open",
				"COMMAND_MODE": "unix2003",
				"EDITOR": "vim",
				"GOPATH": "/Users/ericson/.go",
				"GREP_COLOR": "37;45",
				"GREP_COLORS": "mt=37;45",
				"HOME": "/Users/ericson",
				"HOMEBREW_CELLAR": "/opt/homebrew/Cellar",
				"HOMEBREW_PREFIX": "/opt/homebrew",
				"HOMEBREW_REPOSITORY": "/opt/homebrew",
				"INFOPATH": "/opt/homebrew/share/info:/usr/local/share/info:",
				"LANG": "en_US.UTF-8",
				"LDFLAGS": "-L/opt/homebrew/opt/llvm/lib/c++ -Wl,-rpath,/opt/homebrew/opt/llvm/lib/c++",
				"LESS": "-g -i -M -R -S -w -X -z-4",
				"LESS_TERMCAP_mb": "\u001b[01;31m",
				"LESS_TERMCAP_md": "\u001b[01;31m",
				"LESS_TERMCAP_me": "\u001b[0m",
				"LESS_TERMCAP_se": "\u001b[0m",
				"LESS_TERMCAP_so": "\u001b[00;47;30m",
				"LESS_TERMCAP_ue": "\u001b[0m",
				"LESS_TERMCAP_us": "\u001b[01;32m",
				"LOGNAME": "ericson",
				"LSCOLORS": "exfxcxdxbxGxDxabagacad",
				"MANPATH": "/opt/homebrew/share/man:/usr/local/share/man:::",
				"MallocNanoZone": "0",
				"ORIGINAL_XDG_CURRENT_DESKTOP": "undefined",
				"P9K_SSH": "0",
				"PAGER": "less",
				"PATH": "/usr/local/opt/openjdk/bin:/usr/local/opt/game-porting-toolkit/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/ericson/.pnpm:/usr/local/bin:/usr/local/sbin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/local/sbin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/ericson/.cargo/bin:/Users/ericson/Library/Application Support/JetBrains/Toolbox/scripts:/Users/ericson/.local/bin:/Users/ericson/.go/bin:/Users/ericson/.local/share/containers/podman-desktop/extensions-storage/podman-desktop.compose/bin",
				"PNPM_HOME": "/Users/ericson/.pnpm",
				"PWD": "/",
				"SHELL": "/bin/zsh",
				"SHLVL": "0",
				"SSH_AUTH_SOCK": "/private/tmp/com.apple.launchd.a62yq49fKe/Listeners",
				"TMPDIR": "/var/folders/k5/pvf6cfbd05s_prpwdl0h03rr0000gn/T/",
				"USER": "ericson",
				"VISUAL": "vim",
				"VSCODE_AMD_ENTRYPOINT": "vs/workbench/api/node/extensionHostProcess",
				"VSCODE_CODE_CACHE_PATH": "/Users/ericson/Library/Application Support/Code/CachedData/611f9bfce64f25108829dd295f54a6894e87339d",
				"VSCODE_CRASH_REPORTER_PROCESS_TYPE": "extensionHost",
				"VSCODE_CWD": "/",
				"VSCODE_HANDLES_UNCAUGHT_ERRORS": "true",
				"VSCODE_IPC_HOOK": "/Users/ericson/Library/Application Support/Code/1.90-main.sock",
				"VSCODE_NLS_CONFIG": "{\"locale\":\"pt-br\",\"osLocale\":\"pt-br\",\"availableLanguages\":{},\"_languagePackSupport\":true}",
				"VSCODE_PID": "79712",
				"XPC_FLAGS": "0x0",
				"XPC_SERVICE_NAME": "application.com.microsoft.VSCode.81888144.81888150",
				"_": "/Applications/Visual Studio Code.app/Contents/MacOS/Electron",
				"__CFBundleIdentifier": "com.microsoft.VSCode",
				"__CF_USER_TEXT_ENCODING": "0x1F5:0x0:0x47",
				"ELECTRON_RUN_AS_NODE": "1",
				"VSCODE_L10N_BUNDLE_LOCATION": ""
			},
			"problemMatcher": ["$rustc"],
			"group": "build",
			"label": "rust: test writes_operations_and_rows_together"
		}
	]
}
