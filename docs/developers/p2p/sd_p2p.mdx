---
title: sd-p2p
index: 22
---

# `sd_p2p` crate

The P2P crate was designed from the group up to be modular.

The `P2P` struct is the core of the system, and suprisingly doesn't actually do any P2P functionality. It's a state manager and event bus along with providing a hook system for other components of the P2P system to register themselves.

This modular design helps with separting the concern which helps with comprehending the entire system and makes it easier for testing.

The `sd_p2p` crate provides a hook for:
 - `Mdns` - Local network discovery
 - `Quic` - Quic transport layer built on top of `libp2p`

## What are hooks?

A hook is very similar to an actor. It's a component which can be registered with the P2P system.

A hook allows for processing events from the P2P system and also ensures when the P2P system shuts down, the hook is also shutdown.

Their are special hooks called listeners. These are implemented as a superset of a regular hook and are able to create and accept connections.

Subcrates:
 - [`sd_p2p_block`](https://github.com/spacedriveapp/spacedrive/tree/main/crates/p2p/crates/block) - Block protocol based on [SyncThing Block Exchange Protocol v1](https://docs.syncthing.net/specs/bep-v1.html)
 - [`sd_p2p_proto`](https://github.com/spacedriveapp/spacedrive/tree/main/crates/p2p/crates/proto) - Utilities for zero fluff encoding and decoding.
 - [`sd_p2p_tunnel`](https://github.com/spacedriveapp/spacedrive/tree/main/crates/p2p/crates/tunnel) - Encrypt a stream of data between two nodes
